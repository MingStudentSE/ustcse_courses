# 设备驱动程序设计

## **授课老师**

陈博

## 课程内容

介绍寄存器、存储器等电路单元的基本原理及程序指令执行的硬件实现，给出面向寄存器编程的典型案例；介绍中断原理，驱动程序和微内核操作系统的关系；在2.6内核基础上，详解linux环境下常见设备类型的驱动程序开发；讨论主流嵌入式操作系统下设备驱动的开发流程，同时，也适当介绍了一些嵌入式软件研发调试技术。

## **参考**教材

《Linux设备驱动程序》

《精通Linux设备驱动程序开发》

《Linux设备驱动开发详解》

### 实验

| **课程**                                                     | **相应实验**           |
| ------------------------------------------------------------ | ---------------------- |
| 第一部分：linux嵌入式开发基础                                | linux的基本命令实验    |
|                                                              | VI编辑器实验           |
|                                                              | 模块的编写实验         |
| 第二部分：驱动基础-字符设备驱动                              | 简单字符设备驱动的编写 |
|                                                              | scull驱动程序的理解    |
| 第三部分：字符设备驱动核心理论（并发、中断、定时器、阻塞、I/O操作、内存分配等） | 驱动程序中并发实验     |
|                                                              | 驱动程序中中断实验     |
|                                                              | 驱动程序中定时器实验   |
|                                                              | 驱动设计中阻塞实验     |
| 第四部分：块设备、网络设备驱动                               | 块设备驱动程序实验     |
| 驱动示例                                                     | A/D驱动程序解析        |
|                                                              | 触摸屏驱动程序解析     |
|                                                              | USB摄像头驱动分析      |

**实验1:**

1. 掌握模块的基本要素及加载、卸载、查看工具的使用。
2. 掌握 module_init 和 module_exit 的使用。
3. 掌握宏MODULE_LICENSE 、MODULE_AUTHOR、MODULE_DESCRIPTION 和 MODULE_SUPPORTED_DEVICE 的使用及 modinfo 的使用。
4. 掌握向模块传递参数的方法。
5. 掌握对文件编译。

**实验2：**

​	编写驱动，在/dev下建立一个设备，通过应用程序访问它，通过write()操作向设备里写入大小写混和的一串字母，之后驱动程序内部将其转换为大小写相反的形式。最后应用程序通过read()操作进行读取。并在控制台下的应用程序中将结果进行显示。

**实验3：**

​	修改代码11，需要在其中建立一个变量代表IP地址，在应用程序中通过ioctl命令对其进行设置。并在控制台下的应用程序中将结果进行显示。

## 笔记

宁宁提供的笔记放在笔记文件夹

## 考试

只有期末考试，闭卷

老师会在最后一节课发一份复习PPT，考试基本都是PPT上的内容

## 复习方法

看笔记和复习PPT，把PPT上的内容都弄懂

---

以上内容由小光撰写，小铭补充

感谢宁宁提供的笔记